<!DOCTYPE html>
<html>
<head>
	<title>Floating Dials 2.1.0</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="http://code.jquery.com/mobile/git/jquery.mobile-git.min.css">
	<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
	<script src="http://code.jquery.com/mobile/git/jquery.mobile-git.min.js"></script>
</head>

<body>
	<div data-role="page" id="page1">
  		<div data-role="header">
    		<button id="b-cancel" class="ui-btn-left ui-btn ui-btn-inline ui-mini ui-corner-all ui-btn-icon-left ui-icon-delete">Cancel</button>
    		<h1>Floating Dials 2.1.0</h1>
    		<button id="b-submit" class="ui-btn-right ui-btn ui-btn-b ui-btn-inline ui-mini ui-corner-all ui-btn-icon-right ui-icon-check">Save</button>
  		</div>
        <div data-role="content">
            <label for="theme">Theme:</label>
            <select name="theme" id="theme" data-role="slider">
                <option value="0">dark</option>
                <option value="1">light</option>
            </select>
            <label for="hourdialtype">Hour Dial Type:</label>
            <select name="hourdialtype" id="hourdialtype" data-role="slider">
                <option value="0">12h</option>
                <option value="1">24h</option>
            </select>
            <label for="seconds">Display Seconds:</label>
            <select name="seconds" id="seconds" data-role="slider">
                <option value="0">off</option>
                <option value="1">on</option>
            </select>
            <label for="handwidth">Hands Width %:</label>
            <input type="range" name="handwidth" id="handwidth" min="1" max="25">
            
        </div>
	</div>

    <script type="text/javascript">    
    	$().ready(function() {
			var dictionary;
			try {

				dictionary = JSON.parse(localStorage['Floating Dials']);
			}
			catch(e) {
				dictionary = {
					"theme" : "0",
					"hourdialtype" : "0",
					"seconds" : "0",
					"handwidth" : "25",
					
				};
			}

			if(dictionary['theme']) {
				$('#theme').val(dictionary['theme'].toString()).slider('refresh');
			}
			if(dictionary['hourdialtype']) {
				$('#hourdialtype').val(dictionary['hourdialtype'].toString()).slider('refresh');
			}
			if(dictionary['seconds']) {
				$('#seconds').val(dictionary['seconds'].toString()).slider('refresh');
			}
			if(dictionary['handwidth']) {
				$('#handwidth').val(dictionary['handwidth'].toString()).slider('refresh');
			}
			
		});

    	$('#b-submit').click(function() {
    	  var dictionary = {};
    	  {
    	  	var field=document.getElementById('theme');
    	  	dictionary['theme'] = parseInt(field.value);
    	  }
    	  {
    	  	var field=document.getElementById('hourdialtype');
    	  	dictionary['hourdialtype'] = parseInt(field.value);
    	  }
    	  {
    	  	var field=document.getElementById('seconds');
    	  	dictionary['seconds'] = parseInt(field.value);
    	  }
    	  {
    	  	var field=document.getElementById('handwidth');
    	  	dictionary['handwidth'] = parseInt(field.value);
    	  }
    	  
    	  localStorage['Floating Dials'] = JSON.stringify(dictionary);

    	  var location = "pebblejs://close#" + encodeURIComponent(localStorage['Floating Dials']);
    	  window.location.href = location;
    	});
	
    	$('#b-cancel').click(function() {
    	  var location = "pebblejs://close#CANCEL";
    	  window.location.href = location;
    	});
	</script>
</body>
</html>