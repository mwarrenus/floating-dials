#!/bin/sh

app="floating-dials"
MAJOR="1"
MINOR="1"

config="src/config.h" # $app.c: #include "config.h"

for f in "main"
do
    echo "// generated by make-all -- do not edit" > "$config"
    echo "#define MAJOR $MAJOR" >> "$config"
    echo "#define MINOR $MINOR" >> "$config"
    echo "#define VERSION \"$MAJOR.$MINOR\"" >> "$config"
case "$f" in
    "main")
	    ;;
esac
    ./waf configure && ./waf build && mv "build/$app.pbw" "build/$app-$f-$MAJOR.$MINOR.pbw"
done
